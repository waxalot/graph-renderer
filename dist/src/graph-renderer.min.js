!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(5),i=n(7),u=n(12),s=n(13),c=n(14),a=n(15),l=n(22);document.addEventListener("DOMContentLoaded",function(e){var t=new r.GraphNode,n=new r.GraphNode,d=new o.Graph;d.addNode(t),d.addNode(n);var f=new u.VisualGraphNode;f.node=t,f.position.value=new c.Point(100,100),f.size.value=new s.Size(50,50);var p=new u.VisualGraphNode;p.node=n,p.position.value=new c.Point(400,300),p.size.value=new s.Size(50,50);var h=new i.VisualGraph;h.graph=d,h.addNode(f),h.addNode(p);var v=document.getElementById("graph-container"),y=new a.SVGViewModelsFactory,_=y.createGraphViewModel(h),w=new l.SVGRenderersFactory,m=w.createGraphRenderer();m.setContainerElement(v),m.render(_)})},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(4),u=function(e){function t(){var t=e.call(this)||this;return t.edges=new i.ItemList,t}return r(t,e),t.prototype.addEdge=function(e){e.from=this,this.edges.add(e)},t}(o.GraphItem);t.GraphNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(){this.guid=r.Guid.newGuid()}return e}();t.GraphItem=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.newGuid=function(){return e.s4()+e.s4()+"-"+e.s4()+"-"+e.s4()+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()},e.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e}();t.Guid=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.forEach=function(t){for(var n,r=e.items.length,o=0;o<r;o++){n=e.items[o];var i=t(n);if(i||!1===i)return i}},this.items=new Array}return Object.defineProperty(e.prototype,"count",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.items.push(e)},e.prototype.indexOf=function(e){return this.items.indexOf(e)},e.prototype.remove=function(e){var t=this.items.indexOf(e);t>-1&&this.items.splice(t,1)},e.prototype.removeAt=function(e){e>-1&&e<this.items.length&&this.items.splice(e,1)},e.prototype.findByGuid=function(e){var t=this.forEach(function(t){if(t.guid===e)return t});return t||null},e}();t.ItemList=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(2),u=n(4),s=function(e){function t(){var t=e.call(this)||this;return t.nodes=new u.ItemList,t}return r(t,e),t.prototype.addNode=function(e){e||o.Utils.throwReferenceError("node"),this.nodes.add(e)},t}(i.GraphItem);t.Graph=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.throwReferenceError=function(e){throw new ReferenceError('The argument "'+e+'" was null or undefined.')},e}();t.Utils=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=n(4),u=n(6),s=function(e){function t(){var t=e.call(this)||this;return t.nodes=new i.ItemList,t}return r(t,e),t.prototype.addNode=function(e){e||u.Utils.throwReferenceError("node"),this.nodes.add(e)},t.prototype.handleGraphNodeSelection=function(e,t){e&&(t?e.isSelected.value=!e.isSelected.value:(this.deselectAllNodes(),e.isSelected.value=!0))},t.prototype.deselectAllNodes=function(){this.nodes&&this.nodes.forEach(function(e){e.isSelected.value=!1})},t}(o.VisualGraphItem);t.VisualGraph=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(9),u=function(e){function t(){var t=e.call(this)||this;return t.position=new i.ObservableProperty(t),t.size=new i.ObservableProperty(t),t.isSelected=new i.ObservableProperty(t),t}return r(t,e),t}(o.GraphItem);t.VisualGraphItem=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=n(11),i=n(6),u=function(){function e(e){e||i.Utils.throwReferenceError("propertyOwner"),this.propertyOwner=e,this.valueChangedEvent=new o.GraphEvent,this.values=new r.ChangedEventValuePair}return Object.defineProperty(e.prototype,"value",{get:function(){return this.values.oldValue},set:function(e){this.values.newValue=e,this.values.areEqual()&&(this.onValueChanged(),this.values.oldValue=this.values.newValue)},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(){this.valueChangedEvent&&this.valueChangedEvent.invoke(this.propertyOwner,this.values)},e}();t.ObservableProperty=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.areEqual=function(){return JSON.stringify(this.oldValue)===JSON.stringify(this.newValue)},e}();t.ChangedEventValuePair=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(){this.eventListeners=new Array}return Object.defineProperty(e.prototype,"count",{get:function(){return this.eventListeners?this.eventListeners.length:0},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e){e||r.Utils.throwReferenceError("listener"),this.eventListeners.push(e)},e.prototype.invoke=function(e,t){if(this.eventListeners&&this.eventListeners.length>0)for(var n=this.eventListeners.length,r=0;r<n;r++)this.eventListeners[r](e,t)},e}();t.GraphEvent=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),i=n(4),u=function(e){function t(){var t=e.call(this)||this;return t.edges=new i.ItemList,t}return r(t,e),t}(o.VisualGraphItem);t.VisualGraphNode=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.width=e,this.height=t}return e}();t.Size=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e}();t.Point=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=function(){function e(){}return e.prototype.createGraphViewModel=function(e){return new r.SVGGraphViewModel(e)},e}();t.SVGViewModelsFactory=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(14),u=n(20),s=n(21),c=function(e){function t(t){var n=e.call(this,t)||this;return n.mouseDownHandler=function(e){var t=e.srcElement,r=u.SVGUtils.getGuid(t);if(r&&r===n.guid)return void n.model.deselectAllNodes();n.currentMoveX=e.clientX,n.currentMoveY=e.clientY},n.nodes=new Array,n._currentMovePosition=new i.Point,n.initViewModel(),n}return r(t,e),Object.defineProperty(t.prototype,"currentMoveX",{get:function(){return this._currentMovePosition.x},set:function(e){this._currentMovePosition.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMoveY",{get:function(){return this._currentMovePosition.y},set:function(e){this._currentMovePosition.y=e},enumerable:!0,configurable:!0}),t.prototype.initViewModel=function(){this.initNodes()},t.prototype.initNodes=function(){var e=this,t=this.model.nodes;t&&t.count>0&&t.forEach(function(t){var n=new s.SVGGraphNodeViewModel(e.model,t);e.nodes.push(n)})},t}(o.SVGGraphItemViewModel);t.SVGGraphViewModel=c},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(o.GraphItemViewModel);t.SVGGraphItemViewModel=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(19),i=function(){function e(e){e||r.Utils.throwReferenceError("model"),this.model=e,this.selectionChangedEvent=new o.ViewModelEventAdapter(this,this.model.isSelected.valueChangedEvent),this.positionChangedEvent=new o.ViewModelEventAdapter(this,this.model.position.valueChangedEvent),this.sizeChangedEvent=new o.ViewModelEventAdapter(this,this.model.size.valueChangedEvent)}return Object.defineProperty(e.prototype,"guid",{get:function(){return this.model.guid},enumerable:!0,configurable:!0}),e}();t.GraphItemViewModel=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(e,t){e?t||r.Utils.throwReferenceError("modelEvent"):r.Utils.throwReferenceError("viewModel"),this.viewModel=e,this.modelEvent=t}return e.prototype.addEventListener=function(e){var t=this,n=function(n,r){e(t.viewModel,r)};this.modelEvent.addEventListener(n)},e}();t.ViewModelEventAdapter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(){}return e.setGuidAttribute=function(e,t){e?t||r.Utils.throwReferenceError("viewModel"):r.Utils.throwReferenceError("targetElement"),e.setAttribute("data-graph-guid",t.guid)},e.getElementByGuid=function(e,t){if(!t)return null;return e.querySelector('[data-graph-guid="'+t+'"]')},e.getGuid=function(e){return e||r.Utils.throwReferenceError("targetElement"),e.hasAttribute("data-graph-guid")?e.getAttribute("data-graph-guid"):null},e}();t.SVGUtils=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(14),u=function(e){function t(t,n){var r=e.call(this,n)||this;return r.mouseDownHandler=function(e){var t=e.srcElement;if(t){r.model&&r.parentGraph&&r.parentGraph.handleGraphNodeSelection(r.model,e.ctrlKey),r.currentMoveX=e.clientX,r.currentMoveY=e.clientY;for(var n=t.getAttributeNS(null,"transform").slice(7,-1).split(" "),o=n.length,i=0;i<o;i++)r.currentTransformMatrix[i]=parseFloat(n[i]);t.onmousemove=function(e){var n=e.clientX-r.currentMoveX,o=e.clientY-r.currentMoveY;r.currentTransformMatrix[4]+=n,r.currentTransformMatrix[5]+=o;var i="matrix("+r.currentTransformMatrix.join(" ")+")";t.setAttributeNS(null,"transform",i),r.currentMoveX=e.clientX,r.currentMoveY=e.clientY},t.onmouseup=function(e){t.onmousemove=null,t.onmouseout=null,t.onmouseup=null},t.onmouseout=function(e){t.onmousemove=null,t.onmouseout=null,t.onmouseup=null}}},r.parentGraph=t,r._currentMovePosition=new i.Point,r.currentTransformMatrix=new Array,r}return r(t,e),Object.defineProperty(t.prototype,"currentMoveX",{get:function(){return this._currentMovePosition.x},set:function(e){this._currentMovePosition.x=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMoveY",{get:function(){return this._currentMovePosition.y},set:function(e){this._currentMovePosition.y=e},enumerable:!0,configurable:!0}),t.prototype.initViewModel=function(){},t}(o.SVGGraphItemViewModel);t.SVGGraphNodeViewModel=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=n(26),i=function(){function e(){}return e.prototype.createGraphRenderer=function(){var e=this.createNodeRenderer();return new o.SVGGraphRenderer(e)},e.prototype.createNodeRenderer=function(){return new r.SVGGraphNodeRenderer},e}();t.SVGRenderersFactory=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=n(6),u=n(20),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setContainerElement=function(e){e||i.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var t=this.createTargetElement("rect",e);t.classList.add("graph-node"),t.classList.add("graph-draggable"),t.onmousedown=e.mouseDownHandler,t.setAttribute("transform","matrix(1 0 0 1 0 0)"),e.selectionChangedEvent.addEventListener(this.selectionChangedListener),e.positionChangedEvent.addEventListener(this.positionChangedListener),e.sizeChangedEvent.addEventListener(this.sizeChangedListener),this.containerElement.appendChild(t)},t.prototype.positionChangedListener=function(e,t){if(e){var n=u.SVGUtils.getElementByGuid(document,e.guid);n&&(n.setAttribute("x",t.newValue.x.toFixed()),n.setAttribute("y",t.newValue.y.toFixed()))}},t.prototype.sizeChangedListener=function(e,t){if(e){var n=u.SVGUtils.getElementByGuid(document,e.guid);n&&(n.setAttribute("width",t.newValue.width.toFixed()),n.setAttribute("height",t.newValue.height.toFixed()))}},t.prototype.selectionChangedListener=function(e,t){if(e){var n=u.SVGUtils.getElementByGuid(document,e.guid);n&&n.classList.toggle("graph-node-selected")}},t}(o.SVGGraphItemRenderer);t.SVGGraphNodeRenderer=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=n(6),u=n(20),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.createTargetElement=function(e,t){e?t||i.Utils.throwReferenceError("viewModel"):i.Utils.throwReferenceError("elementName");var n;try{n=document.createElementNS("http://www.w3.org/2000/svg",e),u.SVGUtils.setGuidAttribute(n,t)}catch(e){n=null}return n},t}(o.GraphItemRenderer);t.SVGGraphItemRenderer=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.GraphItemRenderer=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(24),i=n(6),u=function(e){function t(t){var n=e.call(this)||this;if(!t)throw new ReferenceError('The argument "nodeRenderer" is null or undefined.');return n.nodeRenderer=t,n}return r(t,e),t.prototype.setContainerElement=function(e){e||i.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){var t=this;if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var n=this.createTargetElement("svg",e);n.classList.add("graph"),n.setAttribute("width","800"),n.setAttribute("height","600"),n.setAttribute("viewbox","0 0 800, 600"),n.onmousedown=e.mouseDownHandler,e.nodes&&e.nodes.length>0&&e.nodes.forEach(function(e){t.nodeRenderer.setContainerElement(n),t.nodeRenderer.render(e)}),this.containerElement.appendChild(n)},t}(o.SVGGraphItemRenderer);t.SVGGraphRenderer=u}]);