!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(12),i=n(23);document.addEventListener("DOMContentLoaded",function(e){var t=new r.GraphNode(new r.Point(100,100),new r.Size(50,50)),n=new r.GraphNode(new r.Point(400,300),new r.Size(50,50));t.addConnection(n);var s=new r.Graph;s.addNode(t),s.addNode(n);var u=document.getElementById("graph-container"),c=new o.SVGViewModelsFactory,a=new i.RectangularEdgeRouter,d=c.createGraphViewModel(s,a),f=new o.SVGRenderersFactory,l=f.createGraphRenderer();l.setContainerElement(u),l.render(d)})},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(4)),r(n(5)),r(n(7)),r(n(8)),r(n(6)),r(n(3)),r(n(9)),r(n(10)),r(n(11))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),o=function(){function e(e){this.size=e,this.size||(this.size=new r.Size)}return e}();t.GraphModel=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.width=e,this.height=t}return e}();t.Size=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.segments=new Array}return e}();t.Curve=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=function(){function e(){this.startPos=new r.Point,this.endPos=new r.Point,this.ctrlPos1=new r.Point,this.ctrlPos2=new r.Point}return e}();t.CurveSegment=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e}();t.Point=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){var t=e.call(this)||this;return t.nodes=new Array,t}return r(t,e),t.prototype.addNode=function(e){this.nodes.push(e)},t.prototype.getNodes=function(){return(new Array).concat(this.nodes)},t}(o.GraphModel);t.Graph=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t,n){var r=e.call(this,n)||this;return r.position=t,r.connections=new Array,r}return r(t,e),t.prototype.addConnection=function(e){var t=new o.Edge(this,e);this.connections.push(t)},t.prototype.getConnections=function(){return(new Array).concat(this.connections)},t}(o.GraphModel);t.GraphNode=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(t,n){var r=e.call(this)||this;if(!t)throw new ReferenceError('The argument "sourceNode" is null or undefined.');if(!n)throw new ReferenceError('The argument "targetNode" is null or undefined.');return r.sourceNode=t,r.targetNode=n,r}return r(t,e),t}(o.GraphModel);t.Edge=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.newGuid=function(){return e.s4()+e.s4()+"-"+e.s4()+"-"+e.s4()+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()},e.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e}();t.Guid=n},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(13)),r(n(22))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14),o=function(){function e(){}return e.prototype.createGraphRenderer=function(){var e=this.createNodeRenderer(),t=this.createEdgeRenderer();return new r.SVGGraphRenderer(e,t)},e.prototype.createNodeRenderer=function(){return new r.SVGNodeRenderer},e.prototype.createEdgeRenderer=function(){return new r.SVGEdgeRenderer},e}();t.SVGRenderersFactory=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(15)),r(n(16)),r(n(19)),r(n(20)),r(n(21))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.Renderer=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),i=n(17),s=n(18),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.createTargetElement=function(e,t){e?t||s.Utils.throwReferenceError("viewModel"):s.Utils.throwReferenceError("elementName");var n;try{n=document.createElementNS("http://www.w3.org/2000/svg",e),i.SVGUtils.setGuidAttribute(n,t)}catch(e){n=null}return n},t}(o.Renderer);t.SVGRenderer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),o=function(){function e(){}return e.setGuidAttribute=function(e,t){e?t||r.Utils.throwReferenceError("viewModel"):r.Utils.throwReferenceError("targetElement"),e.setAttribute("data-graph-guid",t.guid)},e}();t.SVGUtils=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.throwReferenceError=function(e){throw new ReferenceError('The argument "'+e+'" was null or undefined.')},e}();t.Utils=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(16),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setContainerElement=function(e){e||o.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var t=this.createTargetElement("rect",e);if(t.classList.add("graph-node"),t.classList.add("graph-draggable"),t.onmousedown=e.mouseDownHandler,t.setAttribute("transform","matrix(1 0 0 1 0 0)"),e.position&&(t.setAttribute("x",e.position.x.toFixed()),t.setAttribute("y",e.position.y.toFixed())),e.width){var n="width";t.setAttribute(n,e.width.toFixed());var r="width";t.setAttribute("data-bind-"+e.guid+"-"+n,r)}if(e.height){var n="height";t.setAttribute(n,e.height.toFixed());var r="height";t.setAttribute("data-bind-"+e.guid+"-"+n,r)}this.containerElement.appendChild(t)},t}(i.SVGRenderer);t.SVGNodeRenderer=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(14),s=function(e){function t(t,n){var r=e.call(this)||this;if(!t)throw new ReferenceError('The argument "nodeRenderer" is null or undefined.');if(!n)throw new ReferenceError('The argument "edgeRenderer" is null or undefined.');return r.nodeRenderer=t,r.edgeRenderer=n,r}return r(t,e),t.prototype.setContainerElement=function(e){e||o.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){var t=this;if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var n=this.createTargetElement("svg",e);n.setAttribute("width","800"),n.setAttribute("height","600"),n.setAttribute("viewbox","0 0 800, 600"),n.classList.add("graph"),this.containerElement.appendChild(n),e.connections&&e.connections.length>0&&e.connections.forEach(function(e){t.edgeRenderer.setContainerElement(n),t.edgeRenderer.render(e)}),e.nodes&&e.nodes.length>0&&e.nodes.forEach(function(e){t.nodeRenderer.setContainerElement(n),t.nodeRenderer.render(e)})},t}(i.SVGRenderer);t.SVGGraphRenderer=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(14),i=n(18),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setContainerElement=function(e){e||i.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var t=this.createTargetElement("polyline",e);t.classList.add("graph-edge");var n="";e.points.forEach(function(e){n+=e.x.toFixed()+","+e.y.toFixed(),n+=" "}),t.setAttribute("points",n),this.containerElement.appendChild(t)},t}(o.SVGRenderer);t.SVGEdgeRenderer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(23),o=function(){function e(){}return e.prototype.createGraphViewModel=function(e,t){var n=new r.SVGGraphViewModel(t);return n.init(e),n},e}();t.SVGViewModelsFactory=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(24)),r(n(28)),r(n(29)),r(n(30)),r(n(31))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(25),i=function(){function e(){var e=this;this.mouseDownHandler=function(t){var n=t.srcElement;e.currentMoveX=t.clientX,e.currentMoveY=t.clientY;for(var r=n.getAttributeNS(null,"transform").slice(7,-1).split(" "),o=r.length,i=0;i<o;i++)e.currentTransformMatrix[i]=parseFloat(r[i]);n.onmousemove=function(t){var r=t.clientX-e.currentMoveX,o=t.clientY-e.currentMoveY;e.currentTransformMatrix[4]+=r,e.currentTransformMatrix[5]+=o;var i="matrix("+e.currentTransformMatrix.join(" ")+")";n.setAttributeNS(null,"transform",i),e.currentMoveX=t.clientX,e.currentMoveY=t.clientY},n.onmouseup=function(e){n.onmousemove=null,n.onmouseout=null,n.onmouseup=null}},this.guid=r.Guid.newGuid(),this.dataBinder=new o.DataBinder(this.guid),this.dataBindChangeMessage=this.guid+":change",this._currentMovePosition=new r.Point,this.currentTransformMatrix=new Array}return Object.defineProperty(e.prototype,"width",{get:function(){return this.model.size.width},set:function(e){this.model.size.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.model.size.height},set:function(e){this.model.size.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentMoveX",{get:function(){return this._currentMovePosition.x},set:function(e){this._currentMovePosition.x=e,this.triggerDataBinder("currentMoveX",this._currentMovePosition.x)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentMoveY",{get:function(){return this._currentMovePosition.y},set:function(e){this._currentMovePosition.y=e},enumerable:!0,configurable:!0}),e.prototype.getDataBindChangeMessage=function(){return this.dataBindChangeMessage},e.prototype.triggerDataBinder=function(e,t){this.dataBinder.publish(this.dataBindChangeMessage,e,t,this)},e}();t.SVGViewModel=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(26)),r(n(27))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=function(){function e(e){var t=this;this.messageHandler=function(e,n,r){for(var o,i=document.querySelectorAll("["+t.dataAttribute+"="+n+"]"),s=i.length,u=0;u<s;u++)o=i[u],o.setAttribute(n,r)},this.pubSub=new r.DataBindPubSub,this.dataAttribute="data-bind-"+e,this.message=e+":change",document.addEventListener&&document.addEventListener("change",function(e){console.log(e)},!1)}return e.prototype.publish=function(e,t,n,r){this.pubSub.publish(e,t,n,r)},e.prototype.subscribe=function(e,t){this.pubSub.subscribe(e,t)},e.prototype.init=function(){this.pubSub.subscribe(this.message,this.messageHandler)},e}();t.DataBinder=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.callbacks={}}return e.prototype.subscribe=function(e,t){this.callbacks[e]||(this.callbacks[e]=new Array),this.callbacks[e].push(t)},e.prototype.publish=function(e,t,n,r){if(this.callbacks[e])for(var o=this.callbacks[e].length,i=0;i<o;i++)this.callbacks[e][i](t,n,r)},e}();t.DataBindPubSub=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n(18),s=function(e){function t(t){var n=e.call(this)||this;return n.nodes=new Array,n.connections=new Array,n.edgeRouter=t,n}return r(t,e),t.prototype.init=function(e){e||i.Utils.throwReferenceError("graph"),this.model=e,this.initNodes()},t.prototype.initNodes=function(){var e=this,t=this.model.getNodes();t&&t.length>0&&t.forEach(function(t){var n=new o.SVGNodeViewModel;n.init(t),e.nodes.push(n);var r=t.getConnections();r&&r.length>0&&r.forEach(function(t){var r=new o.SVGEdgeViewModel;r.setEdgeRouter(e.edgeRouter),r.init(t,n,null,e),e.connections.push(r)})})},t}(o.SVGViewModel);t.SVGGraphViewModel=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n(18),s=function(e){function t(){return e.call(this)||this}return r(t,e),Object.defineProperty(t.prototype,"position",{get:function(){return this.model.position},set:function(e){this.model.position=e},enumerable:!0,configurable:!0}),t.prototype.init=function(e){e||i.Utils.throwReferenceError("node"),this.model=e},t}(o.SVGViewModel);t.SVGNodeViewModel=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(23),i=n(1),s=n(18),u=function(e){function t(){var t=e.call(this)||this;return t.points=new Array,t}return r(t,e),t.prototype.init=function(e,t,n,r){e?r||s.Utils.throwReferenceError("graphViewModel"):s.Utils.throwReferenceError("edge"),this.model=e,this.startNodeViewModel=t,this.startNodeViewModel.dataBinder.subscribe(this.startNodeViewModel.getDataBindChangeMessage(),this.startNodeChangedCallback),this.endNodeViewModel=n,this.endNodeViewModel.dataBinder.subscribe(this.endNodeViewModel.getDataBindChangeMessage(),this.endNodeChangedCallback),this.graphViewModel=r,this.initPoints()},t.prototype.startNodeChangedCallback=function(e,t,n){console.log("start node: "+e+": "+t)},t.prototype.endNodeChangedCallback=function(e,t,n){console.log("end node: "+e+": "+t)},t.prototype.setEdgeRouter=function(e){e||s.Utils.throwReferenceError("edgeRouter"),this.edgeRouter=e},t.prototype.initPoints=function(){var e=this,t=new i.Point;t.x=this.model.sourceNode.position.x+.5*this.model.sourceNode.size.width,t.y=this.model.sourceNode.position.y+.5*this.model.sourceNode.size.height;var n=new i.Point;if(n.x=this.model.targetNode.position.x+.5*this.model.targetNode.size.width,n.y=this.model.targetNode.position.y+.5*this.model.targetNode.size.height,!this.edgeRouter)return void s.Utils.throwReferenceError("No edge router was set. Call setEdgeRouter() before!");var r=this.edgeRouter.createEdgePoints(t,n,this.graphViewModel);this.points.push(t),r.forEach(function(t){e.points.push(t)}),this.points.push(n)},t}(o.SVGViewModel);t.SVGEdgeViewModel=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(){}return e.prototype.createEdgePoints=function(e,t,n){var r=new Array;return r.push(this.createRectangularIntermediatePoint(e,t)),r},e.prototype.createRectangularIntermediatePoint=function(e,t){var n=new r.Point;return n.x=e.x+(t.x-e.x),n.y=e.y,n},e}();t.RectangularEdgeRouter=o}]);