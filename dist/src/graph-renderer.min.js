!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(14),i=n(25);document.addEventListener("DOMContentLoaded",function(e){var t=new r.VisualGraphNode;t.position=new r.Point(100,100),t.size=new r.Size(50,50);var n=new r.VisualGraphNode;n.position=new r.Point(400,300),n.size=new r.Size(50,50);var s=new r.Graph,u=s.addNode(t),c=s.addNode(n);s.addDirectedEdge(u,c);var a=document.getElementById("graph-container"),d=new o.SVGViewModelsFactory,f=new i.RectangularEdgeRouter,l=d.createGraphViewModel(s,f),p=new o.SVGRenderersFactory,h=p.createGraphRenderer();h.setContainerElement(a),h.render(l)})},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(2)),r(n(3)),r(n(4)),r(n(6)),r(n(7)),r(n(9)),r(n(5)),r(n(10)),r(n(11)),r(n(8)),r(n(12)),r(n(13))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e=this;this.forEach=function(t){for(var n=e.list.length,r=0;r<n;r++)t(e.list[r])},this.list=new Array}return Object.defineProperty(e.prototype,"count",{get:function(){return this.list.length},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.list.push(e)},e.prototype.remove=function(e){var t=this.list.indexOf(e);t>-1&&this.list.splice(t,1)},e.prototype.removeAt=function(e){e>-1&&e<this.list.length&&this.list.splice(e,1)},e.prototype.findByGuid=function(e){return this.forEach(function(t){if(t.guid===e)return t}),null},e.prototype.indexOf=function(e){return this.list.indexOf(e)},e}();t.NodeList=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.segments=new Array}return e}();t.Curve=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=function(){function e(){this.startPos=new r.Point,this.endPos=new r.Point,this.ctrlPos1=new r.Point,this.ctrlPos2=new r.Point}return e}();t.CurveSegment=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e}();t.Point=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(){this.nodes=new r.NodeList}return e.prototype.addNode=function(e){var t=new r.GraphNode;return t.value=e,this.nodes.add(t),t},e.prototype.addDirectedEdge=function(e,t,n){e.neighbors.add(t),e.costs.push(n)},e.prototype.addUndirectedEdge=function(e,t,n){void 0===n&&(n=0),e.neighbors.add(t),e.costs.push(n),t.neighbors.add(e),e.costs.push(n)},e.prototype.contains=function(e){return null!=this.nodes.findByGuid(e)},e.prototype.remove=function(e){var t=this.nodes.findByGuid(e);if(!t)return!1;this.nodes.remove(t);return this.nodes.forEach(function(e){var n=e.neighbors.indexOf(t);n>-1&&(e.neighbors.removeAt(n),e.costs.splice(n,1))}),!0},e}();t.Graph=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),o=function(){function e(){this.guid=r.Guid.newGuid()}return e}();t.GraphItem=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.newGuid=function(){return e.s4()+e.s4()+"-"+e.s4()+"-"+e.s4()+"-"+e.s4()+"-"+e.s4()+e.s4()+e.s4()},e.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e}();t.Guid=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(e){function t(){var t=e.call(this)||this;return t.costs=new Array,t.neighbors=new o.NodeList,t}return r(t,e),t}(o.GraphItem);t.GraphNode=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.width=e,this.height=t}return e}();t.Size=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.VisualGraph=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.VisualGraphNode=n},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(15)),r(n(24))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=function(){function e(){}return e.prototype.createGraphRenderer=function(){var e=this.createNodeRenderer(),t=this.createEdgeRenderer();return new r.SVGGraphRenderer(e,t)},e.prototype.createNodeRenderer=function(){return new r.SVGNodeRenderer},e.prototype.createEdgeRenderer=function(){return new r.SVGEdgeRenderer},e}();t.SVGRenderersFactory=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(17)),r(n(18)),r(n(21)),r(n(22)),r(n(23))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e}();t.Renderer=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),i=n(19),s=n(20),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.createTargetElement=function(e,t){e?t||s.Utils.throwReferenceError("viewModel"):s.Utils.throwReferenceError("elementName");var n;try{n=document.createElementNS("http://www.w3.org/2000/svg",e),i.SVGUtils.setGuidAttribute(n,t)}catch(e){n=null}return n},t}(o.Renderer);t.SVGRenderer=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),o=function(){function e(){}return e.setGuidAttribute=function(e,t){e?t||r.Utils.throwReferenceError("viewModel"):r.Utils.throwReferenceError("targetElement"),e.setAttribute("data-graph-guid",t.guid)},e}();t.SVGUtils=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.throwReferenceError=function(e){throw new ReferenceError('The argument "'+e+'" was null or undefined.')},e}();t.Utils=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),i=n(18),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setContainerElement=function(e){e||o.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var t=this.createTargetElement("rect",e);if(t.classList.add("graph-node"),t.classList.add("graph-draggable"),t.onmousedown=e.mouseDownHandler,t.setAttribute("transform","matrix(1 0 0 1 0 0)"),e.position&&(t.setAttribute("x",e.position.x.toFixed()),t.setAttribute("y",e.position.y.toFixed())),e.width){var n="width";t.setAttribute(n,e.width.toFixed());var r="width";t.setAttribute("data-bind-"+e.guid+"-"+n,r)}if(e.height){var n="height";t.setAttribute(n,e.height.toFixed());var r="height";t.setAttribute("data-bind-"+e.guid+"-"+n,r)}this.containerElement.appendChild(t)},t}(i.SVGRenderer);t.SVGNodeRenderer=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),i=n(16),s=function(e){function t(t,n){var r=e.call(this)||this;if(!t)throw new ReferenceError('The argument "nodeRenderer" is null or undefined.');if(!n)throw new ReferenceError('The argument "edgeRenderer" is null or undefined.');return r.nodeRenderer=t,r.edgeRenderer=n,r}return r(t,e),t.prototype.setContainerElement=function(e){e||o.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){var t=this;if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var n=this.createTargetElement("svg",e);n.setAttribute("width","800"),n.setAttribute("height","600"),n.setAttribute("viewbox","0 0 800, 600"),n.classList.add("graph"),this.containerElement.appendChild(n),e.connections&&e.connections.length>0&&e.connections.forEach(function(e){t.edgeRenderer.setContainerElement(n),t.edgeRenderer.render(e)}),e.nodes&&e.nodes.length>0&&e.nodes.forEach(function(e){t.nodeRenderer.setContainerElement(n),t.nodeRenderer.render(e)})},t}(i.SVGRenderer);t.SVGGraphRenderer=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(16),i=n(20),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.setContainerElement=function(e){e||i.Utils.throwReferenceError("containerElement"),this.containerElement=e},t.prototype.render=function(e){if(!this.containerElement)throw new Error("No container element was set. Call setContainerElement() before!");var t=this.createTargetElement("polyline",e);t.classList.add("graph-edge");var n="";e.points.forEach(function(e){n+=e.x.toFixed()+","+e.y.toFixed(),n+=" "}),t.setAttribute("points",n),this.containerElement.appendChild(t)},t}(o.SVGRenderer);t.SVGEdgeRenderer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),o=function(){function e(){}return e.prototype.createGraphViewModel=function(e,t){return new r.SVGGraphViewModel(e,t)},e}();t.SVGViewModelsFactory=o},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(26)),r(n(30)),r(n(31)),r(n(32)),r(n(33))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=n(27),i=function(){function e(){this.guid=r.Guid.newGuid(),this.dataBinder=new o.DataBinder(this.guid),this.dataBindChangeMessage=this.guid+":change"}return e.prototype.getDataBindChangeMessage=function(){return this.dataBindChangeMessage},e.prototype.triggerDataBinder=function(e,t){this.dataBinder.publish(this.dataBindChangeMessage,e,t,this)},e}();t.SVGViewModel=i},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(28)),r(n(29))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),o=function(){function e(e){var t=this;this.messageHandler=function(e,n,r){for(var o,i=document.querySelectorAll("["+t.dataAttribute+"="+n+"]"),s=i.length,u=0;u<s;u++)o=i[u],o.setAttribute(n,r)},this.pubSub=new r.DataBindPubSub,this.dataAttribute="data-bind-"+e,this.message=e+":change",document.addEventListener&&document.addEventListener("change",function(e){console.log(e)},!1)}return e.prototype.publish=function(e,t,n,r){this.pubSub.publish(e,t,n,r)},e.prototype.subscribe=function(e,t){this.pubSub.subscribe(e,t)},e.prototype.init=function(){this.pubSub.subscribe(this.message,this.messageHandler)},e}();t.DataBinder=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.callbacks={}}return e.prototype.subscribe=function(e,t){this.callbacks[e]||(this.callbacks[e]=new Array),this.callbacks[e].push(t)},e.prototype.publish=function(e,t,n,r){if(this.callbacks[e])for(var o=this.callbacks[e].length,i=0;i<o;i++)this.callbacks[e][i](t,n,r)},e}();t.DataBindPubSub=n},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=function(e){function t(t,n){var r=e.call(this)||this;return r.model=t,r.nodes=new Array,r.connections=new Array,r.edgeRouter=n,r.initViewModel(),r}return r(t,e),t.prototype.initViewModel=function(){this.initNodes()},t.prototype.initNodes=function(){var e=this,t=this.model.nodes;t&&t.count>0&&t.forEach(function(t){var n=new o.SVGNodeViewModel(t);e.nodes.push(n)})},t}(o.SVGViewModel);t.SVGGraphViewModel=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=n(1),s=function(e){function t(t){var n=e.call(this)||this;return n.mouseDownHandler=function(e){var t=e.srcElement;n.currentMoveX=e.clientX,n.currentMoveY=e.clientY;for(var r=t.getAttributeNS(null,"transform").slice(7,-1).split(" "),o=r.length,i=0;i<o;i++)n.currentTransformMatrix[i]=parseFloat(r[i]);t.onmousemove=function(e){var r=e.clientX-n.currentMoveX,o=e.clientY-n.currentMoveY;n.currentTransformMatrix[4]+=r,n.currentTransformMatrix[5]+=o;var i="matrix("+n.currentTransformMatrix.join(" ")+")";t.setAttributeNS(null,"transform",i),n.currentMoveX=e.clientX,n.currentMoveY=e.clientY},t.onmouseup=function(e){t.onmousemove=null,t.onmouseout=null,t.onmouseup=null}},n.model=t,n._currentMovePosition=new i.Point,n.currentTransformMatrix=new Array,n}return r(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this.model.value.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.model.value.size.width},set:function(e){this.model.value.size.width=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.model.value.size.height},set:function(e){this.model.value.size.height=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this.model.value.position},set:function(e){this.model.value.position=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMoveX",{get:function(){return this._currentMovePosition.x},set:function(e){this._currentMovePosition.x=e,this.triggerDataBinder("currentMoveX",this._currentMovePosition.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMoveY",{get:function(){return this._currentMovePosition.y},set:function(e){this._currentMovePosition.y=e},enumerable:!0,configurable:!0}),t.prototype.initViewModel=function(){},t}(o.SVGViewModel);t.SVGNodeViewModel=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),i=n(1),s=n(20),u=function(e){function t(){var t=e.call(this)||this;return t.points=new Array,t}return r(t,e),t.prototype.initViewModel=function(){this.startNodeViewModel&&this.startNodeViewModel.dataBinder.subscribe(this.startNodeViewModel.getDataBindChangeMessage(),this.startNodeChangedCallback),this.endNodeViewModel&&this.endNodeViewModel.dataBinder.subscribe(this.endNodeViewModel.getDataBindChangeMessage(),this.endNodeChangedCallback),this.initPoints()},t.prototype.startNodeChangedCallback=function(e,t,n){console.log("start node: "+e+": "+t)},t.prototype.endNodeChangedCallback=function(e,t,n){console.log("end node: "+e+": "+t)},t.prototype.setEdgeRouter=function(e){e||s.Utils.throwReferenceError("edgeRouter"),this.edgeRouter=e},t.prototype.initPoints=function(){var e=this,t=new i.Point;t.x=this.startNodeViewModel.position.x+.5*this.startNodeViewModel.size.width,t.y=this.startNodeViewModel.position.y+.5*this.startNodeViewModel.height;var n=new i.Point;if(n.x=this.endNodeViewModel.position.x+.5*this.endNodeViewModel.size.width,n.y=this.endNodeViewModel.position.y+.5*this.endNodeViewModel.size.height,!this.edgeRouter)return void s.Utils.throwReferenceError("No edge router was set. Call setEdgeRouter() before!");var r=this.edgeRouter.createEdgePoints(t,n,this.graphViewModel);this.points.push(t),r.forEach(function(t){e.points.push(t)}),this.points.push(n)},t}(o.SVGViewModel);t.SVGEdgeViewModel=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(){function e(){}return e.prototype.createEdgePoints=function(e,t,n){var r=new Array;return r.push(this.createRectangularIntermediatePoint(e,t)),r},e.prototype.createRectangularIntermediatePoint=function(e,t){var n=new r.Point;return n.x=e.x+(t.x-e.x),n.y=e.y,n},e}();t.RectangularEdgeRouter=o}]);